# main.yaml
# Configuration for Alibaba Cloud Function Compute deployment

# Main Backend Service
main_service:
  function_name: "chatbot-backend"
  runtime: "custom-container"
  memory: 512  # MB - can stay lightweight now
  timeout: 60  # seconds
  environment_variables:
    EMBEDDING_SERVICE_URL: "http://embedding-service:8000"  # Internal FC network
  
# Embedding Service
embedding_service:
  function_name: "embedding-service"
  runtime: "custom-container" 
  memory: 1536  # MB - needs more memory for model
  timeout: 120  # seconds - longer for model loading
  instance_concurrency: 10  # Handle multiple requests per instance
  environment_variables:
    MODEL_NAME: "sentence-transformers/all-mpnet-base-v2"

# Service Communication
# Both services will be in same VPC for internal communication
# Main service calls: http://embedding-service:8000/embed